/* === Tailwind === */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Form autofill (Chrome/Edge) === */
:root { color-scheme: light dark; }
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus{
  -webkit-box-shadow: 0 0 0 1000px #ffffff inset !important;
  box-shadow: inset 0 0 0 1000px #ffffff !important;
  -webkit-text-fill-color: #0b1118 !important;
  caret-color: #0b1118 !important;
}
@media (prefers-color-scheme: dark){
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus{
    -webkit-box-shadow: 0 0 0 1000px #0b1118 inset !important;
    box-shadow: inset 0 0 0 1000px #0b1118 !important;
    -webkit-text-fill-color: #f0f5f9 !important;
    caret-color: #f0f5f9 !important;
  }
}

/* =======================================================================
   TOKENS — SINGLE SOURCE OF TRUTH
   ======================================================================= */
:root{
  /* Surfaces */
  --bg:        #f7f7f8;
  --panel:     #ffffff;
  --panel-2:   #f3f4f6;
  --panel-3:   #e5e7eb;
  --editor-bg: #0b0b0c;

  /* Text */
  --text:      #0b0b12;
  --muted:     #667085;
  --muted-2:   #9ca3af;

  /* Borders & shadows */
  --border:    #e5e7eb;
  --border-2:  #d1d5db;
  --shadow:    0 1px 2px rgba(16,24,40,.06), 0 1px 3px rgba(16,24,40,.08);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
  --shadow-xl: 0 20px 25px -5px rgba(0,0,0,.1), 0 10px 10px -5px rgba(0,0,0,.04);

  /* Brand & accents */
  --brand:     #111827;  /* koyu */
  --brand-2:   #0ea5e9;  /* mavi vurgu */
  --brand-3:   #0284c7;  /* koyu mavi */
  --accent:    #22c55e;  /* yeşil vurgu */
  --accent-2:  #16a34a;  /* koyu yeşil */

  /* States */
  --success:   #10b981;
  --warning:   #f59e0b;
  --danger:    #ef4444;

  /* Code */
  --code-bg:     #0f172a;
  --code-fg:     #e2e8f0;
  --code-border: #1f2937;

  /* Misc */
  --radius:    14px;
  --radius-sm: 10px;
  --radius-lg: 20px;
  --transition: 0.2s ease;
  --transition-fast: 0.15s ease;

  /* Animations */
  --transition-normal: 0.25s ease-in-out;
  --transition-slow: 0.35s ease-in-out;
}

/* Manual Dark (Settings → Dark) */
html.dark{
  /* daha yumuşak slate/koyu-mavi palet */
  --bg:        #0e1116;   /* önce: #0b0c10 */
  --panel:     #12171f;   /* önce: #0f1115 */
  --panel-2:   #161c26;   /* önce: #12141a */
  --editor-bg: #0c1118;

  --text:      #dfe7ef;   /* önce çok parlak */
  --muted:     #9aa6b2;

  /* “beyaz şerit” etkisini azalt */
  --border:    #1e2633;   /* önce çok açık kalıyordu */
  --shadow:    0 1px 1px rgba(0,0,0,.25), 0 8px 28px rgba(0,0,0,.28);

  /* brand/pill’ler aşırı beyaz olmasın */
  --brand:     #8aa4ff;   /* koyu zeminde soluk mavi */
  --brand-2:   #22c55e;
  --accent:    #38bdf8;

  --success:   #34d399;
  --warning:   #fbbf24;
  --danger:    #f87171;

  --code-bg:     #0b1220;
  --code-fg:     #e5eef7;
  --code-border: #0a2134;
}


/* System Dark (Settings → System) */
@media (prefers-color-scheme: dark){
  html.system{
    --bg:        #0b0c10;
    --panel:     #0f1115;
    --panel-2:   #12141a;
    --editor-bg: #0b0b0c;

    --text:      #e6e8ee;
    --muted:     #9aa3af;

    --border:    #1f2430;
    --shadow:    0 1px 2px rgba(0,0,0,.35), 0 1px 3px rgba(0,0,0,.4);

    --brand:     #e5e7eb;
    --brand-2:   #22c55e;
    --accent:    #38bdf8;

    --success:   #34d399;
    --warning:   #fbbf24;
    --danger:    #f87171;

    --code-bg:     #0b1220;
    --code-fg:     #e5eef7;
    --code-border: #0b2a3d;
  }
}

/* =======================================================================
   BASE
   ======================================================================= */
@layer base{
  html, body, #root{
    height: 100%;
    background: var(--bg);
    color: var(--text);
  }
  ::selection{ background: color-mix(in srgb, var(--brand-2) 30%, transparent); }
}

/* =======================================================================
   COMPONENTS
   ======================================================================= */
@layer components{
  .wp-card{
    @apply rounded-2xl border shadow-sm;
    background: color-mix(in oklab, var(--panel) 96%, transparent);
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-btn{
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition;
    transition: var(--transition);
  }
  .wp-btn-ghost{
    @apply wp-btn border;
    border-color: var(--border);
    background: color-mix(in oklab, var(--panel) 98%, transparent);
  }
  /* solid buton: markaya bağladık (önceden --ink kullanımı dark'ta bozuyordu) */
  .wp-btn-solid{
    @apply wp-btn text-white;
    background: var(--brand);
  }

  /* New utility classes */
  .wp-input{
    @apply rounded-xl border bg-[color:var(--panel)] text-[color:var(--text)] outline-none focus:ring-2 focus:ring-[color:var(--brand-2)] transition;
    border-color: var(--border);
    transition: var(--transition);
  }
  .wp-input:focus{
    border-color: color-mix(in srgb, var(--brand-2) 60%, var(--border));
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-2) 20%, transparent);
  }

  .wp-panel{
    @apply rounded-2xl border bg-[color:var(--panel)] shadow-sm;
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-pill{
    @apply inline-flex items-center gap-1.5 px-2 py-1 rounded-full border text-xs;
    background: var(--panel-2);
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-gradient-bg{
    background: linear-gradient(135deg, var(--brand-2) 0%, var(--accent) 100%);
  }

  .wp-hover-lift{
    transition: transform var(--transition), box-shadow var(--transition);
  }
  .wp-hover-lift:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
}

/* =======================================================================
   ANIMATIONS
   ======================================================================= */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

.shake {
  animation: shake 0.5s ease-in-out;
}

/* Theme transition */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* =======================================================================
   GENERIC UI
   ======================================================================= */
h1,h2,h3{ color: var(--text); }
.muted,.text-muted{ color: var(--muted); }

.panel{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.panel-2{
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:.5rem; height:36px; padding:0 .9rem;
  border-radius:10px; border:1px solid var(--border);
  background: var(--panel); color: var(--text);
  transition:.15s ease background, .15s ease border-color, .15s ease transform, .15s ease opacity;
  cursor:pointer;
}
.btn:hover{ background: var(--panel-2); }
.btn:active{ transform: translateY(1px); }
.btn.primary{ background: var(--brand); color:#fff; border-color: transparent; }
.btn.primary:hover{ opacity:.92; }
.btn.ghost{ background: transparent; border-color: var(--border); }

/* Inputs */
input,select,textarea{
  background: var(--panel);
  color: var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:.55rem .7rem; outline:none;
}
input:focus,select:focus,textarea:focus{
  border-color: color-mix(in srgb, var(--brand-2) 60%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-2) 20%, transparent);
}
::placeholder{ color: color-mix(in srgb, var(--muted) 70%, transparent); }

/* Tabs */
.tabs{
  display:inline-flex; gap:0;
  background: var(--panel);
  border:1px solid var(--border);
  border-radius:999px; overflow:hidden;
}
.tabs>button{
  padding:.45rem .9rem; font-size:.9rem;
  background:transparent; color:var(--text); border:0;
}
.tabs>button.is-active{ background: var(--brand); color:#fff; }

/* Monaco polish */
.monaco-editor,.monaco-editor-background{ background: var(--editor-bg)!important; }
.monaco-editor .margin{ background: var(--editor-bg)!important; }
.monaco-editor .current-line{ background: rgba(255,255,255,.05)!important; }
.monaco-editor .lines-content{ caret-color:#ffffff; }
.monaco-editor .view-overlays .current-line{ border:1px solid rgba(255,255,255,.08)!important; }

/* Editor container */
.editor-shell{
  border-radius: var(--radius);
  overflow:hidden;
  border:1px solid var(--border);
  box-shadow: var(--shadow);
}

/* Code blocks */
pre,code{
  font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
pre{
  background: var(--code-bg);
  color: var(--code-fg);
  border:1px solid var(--code-border);
  border-radius:12px; padding:.9rem 1rem; overflow:auto;
}
code{
  background: color-mix(in srgb, var(--code-bg) 70%, transparent);
  color: var(--code-fg);
  border-radius:6px; padding:.2rem .35rem;
}

/* Scrollbars */
*{ scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--muted) 30%, transparent) transparent; }
::-webkit-scrollbar{ height:10px; width:10px; }
::-webkit-scrollbar-track{ background:transparent; }
::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--muted) 35%, transparent);
  border-radius:999px; border:2px solid transparent; background-clip:content-box;
}
::-webkit-scrollbar-thumb:hover{ background: color-mix(in srgb, var(--muted) 55%, transparent); }

/* Utils */
.hr{ height:1px; background:var(--border); border:0; margin:.75rem 0; }
.badge{
  display:inline-flex; align-items:center; gap:.35rem;
  height:24px; padding:0 .55rem; font-size:.75rem;
  background: var(--panel-2); border:1px solid var(--border);
  border-radius:999px; color:var(--text);
}

/* Vite template artıkları - Removed */
.card{ padding:2em; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); }
.read-the-docs{ color:var(--muted); }

/* =======================================================================
   FIXES
   ======================================================================= */

/* erişilebilir gizleme */
.sr-file {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}


/* Tailwind yardımcılarını dark'ta tokenlara map'le */
html.dark .bg-white,
html.dark .bg-white\/60,
html.dark .bg-white\/70,
html.dark .bg-white\/80{ background-color: var(--panel) !important; }
html.dark .border-black\/10{ border-color: var(--border) !important; }
html.dark .text-gray-600{ color: var(--muted) !important; }
html.dark .text-gray-700{ color: var(--text) !important; }
html.dark pre{ background: var(--code-bg) !important; color: var(--code-fg) !important; border-color: var(--code-border) !important; }
html.dark .bg-white,
html.dark .bg-white\/60,
html.dark .bg-white\/70,
html.dark .bg-white\/80 { background-color: var(--panel) !important; }

html.dark .text-gray-700 { color: var(--text) !important; }
html.dark .text-gray-600 { color: var(--muted) !important; }
html.dark .border-black\/10 { border-color: var(--border) !important; }

/* header ve kart kenarlarını panel tonuna yaklaştır → hairline kaybolur */
header,
.panel,
.wp-card {
  border-color: color-mix(in oklab, var(--border) 80%, transparent);
}

/* bölüm ayırıcı varsa (hr) aydınlık görünmesin */
.hr {
  background: color-mix(in oklab, var(--border) 65%, transparent);
}

/* kart arka planını biraz saydam karıştırma → “beyaz bant” etkisini azaltır */
.wp-card{
  background: color-mix(in oklab, var(--panel) 98%, transparent);
  box-shadow: var(--shadow);
}

/* pill/rozet’lerin kenarı da koyulaşsın */
.badge{ border-color: color-mix(in oklab, var(--border) 80%, transparent); }
