/* === Tailwind === */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Form autofill (Chrome/Edge) === */
:root { color-scheme: light dark; }
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus{
  -webkit-box-shadow: 0 0 0 1000px #ffffff inset !important;
  box-shadow: inset 0 0 0 1000px #ffffff !important;
  -webkit-text-fill-color: #0b1118 !important;
  caret-color: #0b1118 !important;
}
@media (prefers-color-scheme: dark){
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus{
    -webkit-box-shadow: 0 0 0 1000px #0b1118 inset !important;
    box-shadow: inset 0 0 0 1000px #0b1118 !important;
    -webkit-text-fill-color: #f0f5f9 !important;
    caret-color: #f0f5f9 !important;
  }
}

/* =======================================================================
   BASE
   ======================================================================= */
@layer base{
  html, body, #root{
    height: 100%;
    background: var(--bg);
    color: var(--text);
  }
  ::selection{ background: color-mix(in srgb, var(--brand-2) 30%, transparent); }
}

/* =======================================================================
   COMPONENTS
   ======================================================================= */
@layer components{
  .wp-card{
    @apply rounded-2xl border shadow-sm;
    background: color-mix(in oklab, var(--panel) 96%, transparent);
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-btn{
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition;
    transition: var(--transition);
  }
  .wp-btn-ghost{
    @apply wp-btn border;
    border-color: var(--border);
    background: color-mix(in oklab, var(--panel) 98%, transparent);
  }
  /* solid buton: markaya bağladık (önceden --ink kullanımı dark'ta bozuyordu) */
  .wp-btn-solid{
    @apply wp-btn text-white;
    background: var(--brand);
  }

  /* New utility classes */
  .wp-input{
    @apply rounded-xl border bg-[color:var(--panel)] text-[color:var(--text)] outline-none focus:ring-2 focus:ring-[color:var(--brand-2)] transition;
    border-color: var(--border);
    transition: var(--transition);
  }
  .wp-input:focus{
    border-color: color-mix(in srgb, var(--brand-2) 60%, var(--border));
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-2) 20%, transparent);
  }

  .wp-panel{
    @apply rounded-2xl border bg-[color:var(--panel)] shadow-sm;
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-pill{
    @apply inline-flex items-center gap-1.5 px-2 py-1 rounded-full border text-xs;
    background: var(--panel-2);
    border-color: var(--border);
    transition: var(--transition);
  }

  .wp-gradient-bg{
    background: linear-gradient(135deg, var(--brand-2) 0%, var(--accent) 100%);
  }

  .wp-hover-lift{
    transition: transform var(--transition), box-shadow var(--transition);
  }
  .wp-hover-lift:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
}

/* =======================================================================
   ANIMATIONS
   ======================================================================= */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

.shake {
  animation: shake 0.5s ease-in-out;
}

/* Theme transition */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* =======================================================================
   GENERIC UI
   ======================================================================= */
h1,h2,h3{ color: var(--text); }
.muted,.text-muted{ color: var(--muted); }

.panel{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.panel-2{
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:.5rem; height:36px; padding:0 .9rem;
  border-radius:10px; border:1px solid var(--border);
  background: var(--panel); color: var(--text);
  transition:.15s ease background, .15s ease border-color, .15s ease transform, .15s ease opacity;
  cursor:pointer;
}
.btn:hover{ background: var(--panel-2); }
.btn:active{ transform: translateY(1px); }
.btn.primary{ background: var(--brand); color:#fff; border-color: transparent; }
.btn.primary:hover{ opacity:.92; }
.btn.ghost{ background: transparent; border-color: var(--border); }

/* Inputs */
input,select,textarea{
  background: var(--panel);
  color: var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:.55rem .7rem; outline:none;
}
input:focus,select:focus,textarea:focus{
  border-color: color-mix(in srgb, var(--brand-2) 60%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-2) 20%, transparent);
}
::placeholder{ color: color-mix(in srgb, var(--muted) 70%, transparent); }

/* Tabs */
.tabs{
  display:inline-flex; gap:0;
  background: var(--panel);
  border:1px solid var(--border);
  border-radius:999px; overflow:hidden;
}
.tabs>button{
  padding:.45rem .9rem; font-size:.9rem;
  background:transparent; color:var(--text); border:0;
}
.tabs>button.is-active{ background: var(--brand); color:#fff; }

/* Monaco polish */
.monaco-editor,.monaco-editor-background{ background: var(--editor-bg)!important; }
.monaco-editor .margin{ background: var(--editor-bg)!important; }
.monaco-editor .current-line{ background: rgba(255,255,255,.05)!important; }
.monaco-editor .lines-content{ caret-color:#ffffff; }
.monaco-editor .view-overlays .current-line{ border:1px solid rgba(255,255,255,.08)!important; }

/* Editor container */
.editor-shell{
  border-radius: var(--radius);
  overflow:hidden;
  border:1px solid var(--border);
  box-shadow: var(--shadow);
}

/* Code blocks */
pre,code{
  font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
pre{
  background: var(--code-bg);
  color: var(--code-fg);
  border:1px solid var(--code-border);
  border-radius:12px; padding:.9rem 1rem; overflow:auto;
}
code{
  background: color-mix(in srgb, var(--code-bg) 70%, transparent);
  color: var(--code-fg);
  border-radius:6px; padding:.2rem .35rem;
}

/* Scrollbars */
*{ scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--muted) 30%, transparent) transparent; }
::-webkit-scrollbar{ height:10px; width:10px; }
::-webkit-scrollbar-track{ background:transparent; }
::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--muted) 35%, transparent);
  border-radius:999px; border:2px solid transparent; background-clip:content-box;
}
::-webkit-scrollbar-thumb:hover{ background: color-mix(in srgb, var(--muted) 55%, transparent); }

/* Utils */
.hr{ height:1px; background:var(--border); border:0; margin:.75rem 0; }
.badge{
  display:inline-flex; align-items:center; gap:.35rem;
  height:24px; padding:0 .55rem; font-size:.75rem;
  background: var(--panel-2); border:1px solid var(--border);
  border-radius:999px; color:var(--text);
}

/* Vite template artıkları - Removed */
.card{ padding:2em; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); }
.read-the-docs{ color:var(--muted); }

/* =======================================================================
   FIXES
   ======================================================================= */

/* erişilebilir gizleme */
.sr-file {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}


/* Tailwind yardımcılarını dark'ta tokenlara map'le */
html.dark .bg-white,
html.dark .bg-white\/60,
html.dark .bg-white\/70,
html.dark .bg-white\/80{ background-color: var(--panel) !important; }
html.dark .border-black\/10{ border-color: var(--border) !important; }
html.dark .text-gray-600{ color: var(--muted) !important; }
html.dark .text-gray-700{ color: var(--text) !important; }
html.dark pre{ background: var(--code-bg) !important; color: var(--code-fg) !important; border-color: var(--code-border) !important; }
html.dark .bg-white,
html.dark .bg-white\/60,
html.dark .bg-white\/70,
html.dark .bg-white\/80 { background-color: var(--panel) !important; }

html.dark .text-gray-700 { color: var(--text) !important; }
html.dark .text-gray-600 { color: var(--muted) !important; }
html.dark .border-black\/10 { border-color: var(--border) !important; }

/* header ve kart kenarlarını panel tonuna yaklaştır → hairline kaybolur */
header,
.panel,
.wp-card {
  border-color: color-mix(in oklab, var(--border) 80%, transparent);
}

/* bölüm ayırıcı varsa (hr) aydınlık görünmesin */
.hr {
  background: color-mix(in oklab, var(--border) 65%, transparent);
}

/* kart arka planını biraz saydam karıştırma → “beyaz bant” etkisini azaltır */
.wp-card{
  background: color-mix(in oklab, var(--panel) 98%, transparent);
  box-shadow: var(--shadow);
}

/* pill/rozet’lerin kenarı da koyulaşsın */
.badge{ border-color: color-mix(in oklab, var(--border) 80%, transparent); }


/* =======================================================================
   MOBILE RESPONSIVE UTILITIES
   ======================================================================= */

/* Safe area insets for notched devices (iPhone X+) */
@supports (padding: max(0px)) {
  .safe-area-inset-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  .safe-area-inset-top {
    padding-top: max(0.5rem, env(safe-area-inset-top));
  }
}

/* Touch-friendly tap targets */
@media (hover: none) and (pointer: coarse) {
  button, 
  [role="button"],
  input[type="button"],
  input[type="submit"] {
    min-height: 44px;
  }
  
  /* Improve scrolling on mobile */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Better text selection on mobile */
  ::selection {
    background: color-mix(in srgb, var(--brand-2) 40%, transparent);
  }
}

/* Prevent horizontal scroll on mobile */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Mobile-first responsive typography */
@media (max-width: 640px) {
  html {
    font-size: 15px;
  }
  
  h1 {
    font-size: 1.5rem;
    line-height: 1.3;
  }
  
  h2 {
    font-size: 1.25rem;
    line-height: 1.35;
  }
  
  h3 {
    font-size: 1.1rem;
    line-height: 1.4;
  }
}

/* Improve form inputs on mobile */
@media (max-width: 640px) {
  input, select, textarea {
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
}

/* Hide scrollbars on mobile while keeping scroll functionality */
@media (max-width: 768px) {
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}
